<!DOCTYPE html>
<html>
<head>
  <title>Chess Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(8, 60px);
      grid-template-rows: repeat(8, 60px);
      margin: 2rem auto;
      width: fit-content;
      border: 3px solid #333;
    }
    .square {
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      cursor: pointer;
    }
    .light { background: #f0d9b5; }
    .dark { background: #b58863; }
    .selected { background: #7fc97f !important; }
    h1 { text-align: center; color: #333; }
    .games-list {
      background: white;
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 2rem;
    }
    .game-item {
      padding: 0.5rem;
      border-bottom: 1px solid #ddd;
    }
    button {
      background: #4CAF50;
      color: white;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
    }
    button:hover {
      background: #45a049;
    }
  </style>
</head>
<body>
  <nav style="background: #333; padding: 1rem; margin-bottom: 2rem;">
    <div style="max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center;">
      <div style="display: flex; gap: 2rem; align-items: center;">
        <a href="/" style="color: white; text-decoration: none; font-weight: bold; font-size: 1.2rem;">‚ôüÔ∏è Chess Game</a>
      </div>
      <div style="display: flex; gap: 1rem; align-items: center;">
        <% if (user) { %>
          <span style="color: white;"><%= user.name %></span>
          <a href="/logout" style="color: white; text-decoration: none;">Logout</a>
        <% } else { %>
          <a href="/login" style="color: white; text-decoration: none;">Login</a>
        <% } %>
      </div>
    </div>
  </nav>
  
  <div class="container">
    <h1>‚ôüÔ∏è Chess Game</h1>
    
    <div class="games-list">
      <h2>Your Active Games</h2>
      <% if (games.length === 0) { %>
        <p>No active games. Create a new one!</p>
      <% } else { %>
        <% games.forEach(game => { %>
          <div class="game-item">
            <strong>Game #<%= game.id %></strong> - 
            vs <%= game.white_player_id === user.id ? game.black_player_name : game.white_player_name %>
            <a href="/game/<%= game.id %>">Play</a>
          </div>
        <% }) %>
      <% } %>
      
      <form action="/game/new" method="POST" style="margin-top: 1rem;">
        <button type="submit">üéÆ New Game</button>
      </form>
    </div>

    <div id="board" class="board">
      <!-- Chess board will be rendered here -->
    </div>
  </div>

  <script>
    // Basic chess board rendering
    const pieces = {
      'r': '‚ôú', 'n': '‚ôû', 'b': '‚ôù', 'q': '‚ôõ', 'k': '‚ôö', 'p': '‚ôü',
      'R': '‚ôñ', 'N': '‚ôò', 'B': '‚ôó', 'Q': '‚ôï', 'K': '‚ôî', 'P': '‚ôô'
    };

    function renderBoard() {
      const board = document.getElementById('board');
      board.innerHTML = '';
      
      for (let row = 0; row < 8; row++) {
        for (let col = 0; col < 8; col++) {
          const square = document.createElement('div');
          square.className = 'square ' + ((row + col) % 2 === 0 ? 'light' : 'dark');
          square.dataset.row = row;
          square.dataset.col = col;
          
          // Add initial pieces (simplified)
          if (row === 1) square.textContent = pieces['p'];
          if (row === 6) square.textContent = pieces['P'];
          if (row === 0) {
            const backRow = ['r', 'n', 'b', 'q', 'k', 'b', 'n', 'r'];
            square.textContent = pieces[backRow[col]];
          }
          if (row === 7) {
            const backRow = ['R', 'N', 'B', 'Q', 'K', 'B', 'N', 'R'];
            square.textContent = pieces[backRow[col]];
          }
          
          board.appendChild(square);
        }
      }
    }

    renderBoard();
  </script>
</body>
</html>
